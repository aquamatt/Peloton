<?xml version="1.0"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
            "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd"
            [
            <!ENTITY peloton "Peloton">
            <!ENTITY tick "<inlinemediaobject><imageobject><imagedata width='4mm' fileref='tick.png' format='PNG'/></imageobject></inlinemediaobject>">
        ]>

<!--
# $Id$
#
# Copyright (c) 2007-2008 ReThought Limited and Peloton Contributors
# All Rights Reserved
# See LICENSE for details
-->

<article>
    <articleinfo>
        <title>
            The
            &peloton; Installation Guide
        </title>
        <author>
            <firstname>Peloton Development Team</firstname>
        </author>
        <releaseinfo>
            $Id$
        </releaseinfo>
        <abstract>
            <para>
                Installation of &peloton; should be straightforward on many platforms
				but there are always occasions when a manual install may be required. This
				document details installation procedures and the packages, libraries and
				applications upon which &peloton; depends.
            </para>
        </abstract>
    </articleinfo>

    <sect1 id='dependencies'>
        <title>Dependencies: 3rd parth apps and libraries</title>
		<sect2>
			<title>Python libraries</title>
			<para>
				The following pythonlibraries are either required always required when using 
				particular modulesand must be installed either by installer scripts 
				(distutils, Debian package etc) or by the system administrator. The summary table
				(see <xref linkend='dependency_summary_table'/>)
				details which packages are necessary under what circumstances.
			</para>
			<orderedlist>
	             <listitem>
	                   <para>
	                   	    <filename>Twisted</filename> Version &gt;=8.0.1 obtainable
						   from <ulink url='http://www.twistedmatrix.com'/>.
	                   </para>
	             </listitem>
	             <listitem>
                       <para>
                           Client-side libraries for AMQP. &peloton; has chosen to use the
                           <classname>py-amqplib</classname> library obtained from <ulink url='http://barryp.org/software/py-amqplib/'/>
                            and announced on <ulink url='http://www.nabble.com/Alternative-Python-AMQP-client-library-td14139740.html'>this page</ulink>.
                       </para>
	             </listitem>
				 <listitem>
					<para>
						Unzip and copy the <filename>python/qpid</filename> directory into the Python path (potentially your <filename>site-packages</filename> 
						directory).
					</para>
					<para>
						Now, in the directory to which you copied <filename>qpid</filename> make a directory called <filename>amqp_specs</filename>
						into which you must place the spec file downloaded from <ulink url='https://jira.amqp.org/confluence/download/attachments/720900/amqp0-8.xml'>here</ulink>.
					</para>
				 </listitem>						
	             <listitem>
	                   <para>
	                   	   <classname>PyCrypto</classname> and <classname>ezPyCrypto</classname>. The former is available from <ulink url='http://www.amk.ca/python/code/crypto.html'/> and 
						   the latter from <ulink url='http://www.freenet.org.nz/ezPyCrypto/'/>. 
	                   </para>
					   <para>
					   	   <classname>PyCrypto</classname> may be installed on Debian from the 
						   <filename>python-crypto</filename> package although at the time of
						   writing package depended on Python &lt;= 2.5 which means a manual install
						   is required (quite un-necessary as far as I can tell). Ubuntu is better but 
						   some encryption schemes are missing and this breaks <filename>ezPyCrypto</filename>.
						   The message seems to be: install from the tarball.
					   </para>
	             </listitem>
<!--				
                 <listitem>
                       <para>
                            <filename>python-memcache</filename> pure-python interface to <filename>memcached</filename>.
							A slower alternative to <filename>cmemcache</filename> discussed below. Only install if
							you cannot install <filename>cmemcache</filename>.
                       </para>
                 </listitem>
-->	
			</orderedlist>
		</sect2>
		<sect2>
			 <title>Non-Python libraries</title>
			 <orderedlist>
<!--				 
			     <listitem>
			         <para>
			         	<filename>cmemcache</filename> obtainable from <ulink url='http://gijsbert.org/cmemcache/'/>
						is a faster version of the pure-Python <filename>Python-Memcache</filename> library
						for interacting with <filename>memcached</filename>. Either may be used; &peloton;
						will try <filename>cmemcache</filename> first and fall back to <filename>Python-Memcache</filename>
						if not available.
					</para>
				</listitem>
-->				 
			     <listitem>
			         <para>
					</para>
				</listitem>
			</orderedlist>
	    </sect2>
		<sect2>
			 <title>Third party applications</title>
            <orderedlist>
                 <listitem>
                       <para>
                            <filename>RebbitMQ</filename> Version &gt;=1.2.0
                       </para>
					   <para>
					   	   RabbitMQ is a supported messaging backend. MQ servers need
						   to be running in the &peloton; environment and these can
						   be downloaded from the RabbitMQ site at <ulink url='http://www.rabbitmq.com/'/>.
						   Packages are available for many platforms from the RabbitMQ site including 
                           Debian/Ubuntu and Windows -
						   these include or will cause to be installed the Erlang language libraries.
					   </para>
                       <para>
                           Documentation for setting up RabbitMQ can be found on the site: in particular the instructions
                            for clustering must be followed carefully - do not forget to copy the cookie to all hosts; without
                            this hosts will not cluster together. More information about AMQP, its internals and security
                            model can be obtained from the very readable specification located at
                            <ulink url='https://jira.amqp.org/confluence/display/AMQP/Download'/>.
                       </para>
                 </listitem>
<!--
                 <listitem>
                       <para>
                       	    <filename>memcached</filename> - the robust and road-tested cacheing daemon.
							Also the accompanying <filename>libmemcached</filename> if you wish to build 
							<filename>cmemcache</filename>.
                       </para>
                 </listitem>
-->	
                 <listitem>
                       <para>
                       </para>
                 </listitem>
            </orderedlist>
		</sect2>
		<sect2 id='dependency_summary'>
			<title>Dependency summary</title>
			<para>
				The following table summarises all the dependencies for &peloton;. The type
				column indicates what kind of dependency this is: P is a pure python
				library; PB is a Python built-in library (partly or entirely C code); 
				A is an independent application. Versions indicated are those tested by
				the authors and do not imply that other versions of given packages
				will definitely not work.
			</para>
			<para>
				Where a package is defined as required with a tick in brackets - (&tick;) - 
				it may be substituted with another providing identical functionality.
			</para>
			<table  id='dependency_summary_table'>
		      <title>Library and application dependencies</title>
			  <tgroup cols='6'>
                <colspec colwidth='2cm' colname='c1'/>
                <colspec colwidth='1.5cm' colname='c2'/>
                <colspec colwidth='1cm' align='center' colname='c4'/>
                <colspec colwidth='1cm' align='center' colname='c5'/>
                <colspec colwidth='7.5cm' colname='c6'/>
				<colspec colwidth='1.5cm' colname='c7'/>
				<thead>
					<row>
                        <entry>Name</entry>
                        <entry>Version</entry>
						<entry>Type</entry>
                        <entry>Reqd</entry>
                        <entry>Notes</entry>
                        <entry>License</entry>
					</row>
				</thead>
				<tbody>
                    <row>
                        <entry>Twisted</entry>
                        <entry>8.0.1</entry>
						<entry>P/PB</entry>
                        <entry>&tick;</entry>
                        <entry>Python asynchronous networking library</entry>
						<entry>MIT</entry>
                    </row>
<!--
			        <row>
                        <entry>memcached</entry>
                        <entry>1.1.12</entry>
                        <entry>A</entry>
                        <entry>&tick;</entry>
                        <entry>Provides distributed result cache</entry>
						<entry>BSD</entry>
			        </row>
                    <row>
                        <entry>cmemcache</entry>
                        <entry>0.91</entry>
                        <entry>PB</entry>
                        <entry>(&tick;)</entry>
                        <entry>Fast memcache adapter</entry>
						<entry>GPL</entry>
                    </row>	
                    <row>
                        <entry>python-memcache</entry>
                        <entry>1.40</entry>
                        <entry>P</entry>
                        <entry>(&tick;)</entry>
                        <entry>Pure Python memcache adapter; a slower alternative to cmemcache</entry>
						<entry>Python</entry>
                    </row>
-->	
                    <row>
                        <entry>RabbitMQ</entry>
                        <entry>1.2.0</entry>
                        <entry>A</entry>
                        <entry>(&tick;)</entry>
                        <entry>AMQP provider; any other provider conformant to the spec may also be used.</entry>
						<entry>MPL</entry>
                    </row>
                    <row>
                        <entry>Python-QPID</entry>
                        <entry>1.0</entry>
                        <entry>P</entry>
                        <entry>&tick;</entry>
                        <entry>AMQP interface library</entry>
						<entry>Apache</entry>
                    </row>
                    <row>
                        <entry>PyCrypto</entry>
                        <entry>2.0.1</entry>
                        <entry>PB</entry>
                        <entry>&tick;</entry>
                        <entry>Python cryptography library</entry>
						<entry>Python</entry>
                    </row>
                    <row>
                        <entry>ezPyCrypto</entry>
                        <entry>0.1.1</entry>
                        <entry>P</entry>
                        <entry>&tick;</entry>
                        <entry>Wrapper to the PyCrypto library</entry>
						<entry>GPL</entry>
                    </row>
				</tbody>
			  </tgroup>
			</table>
	    </sect2>
    </sect1>
</article>

